var app=angular.module("sqlApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/Addresses",{templateUrl:"views/Addresses.html",controller:"addressController"}).when("/Orders",{templateUrl:"views/Orders.html",controller:"orderController"}),b.html5Mode(!0)}]),app.controller("addressController",["$scope","sqlService",function(a,b){a.currentUser=null,a.users=[],a.userAddresses=[],b.users().then(function(b){a.users=b.data}),a.changeUser=function(){b.userAddresses(a.currentUser).then(function(b){a.userAddresses=b.data})}}]),app.controller("orderController",["$scope","sqlService",function(a,b){a.currentUser=null,a.startDate=null,a.endDate=null,a.users=[],a.userOrders=[],b.users().then(function(b){a.users=b.data}),a.updateOrders=function(){a.currentUser&&a.startDate&&a.endDate&&b.userOrders(a.currentUser,a.startDate.toISOString(),a.endDate.toISOString()).then(function(b){a.userOrders=b.data})},a.dateParse=function(a){var b=a.split(/[a-zA-Z]+/);return b[0]},a.moneyFormat=function(a){return"$"+a.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},a.totalPurchases=function(){if(!a.userOrders||a.userOrders.length<=0)return"$0.00";for(var b=0,c=0;c<a.userOrders.length;c++)b+=Number(a.userOrders[c].amount);return a.moneyFormat(String(b.toFixed(2)))}}]),app.factory("sqlService",["$http",function(a){var b={};return b.users=function(){return a.get("/api/users")},b.userAddresses=function(b){return a.get("/api/userAddresses/"+b)},b.userOrders=function(b,c,d){var e=b+"/"+c+"/"+d;return a.get("/api/userOrders/"+e)},b}]);